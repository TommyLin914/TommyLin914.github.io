<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
    <style>
      img {
        width: 100%;
      }
      .img-fluid {
        height: 179px;
        width: 344px;
      }
      .card {
        background-color: #f2c36b;
      }

      .card-title {
        display: block;
        background-color: #000;
        color: #fff;
        border-radius: 5px;
        font-size: 18px;
        text-align: center;
      }
      .card-text {
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 4;
        overflow: hidden;
      }
      .card-img-top {
        transition: all 0.3s ease-in-out;
      }
      .btn-information {
        transition: all 0.3s ease-in-out;
        background-color: #afd1f3;
      }
      .btn-information:hover {
        background-color: #6a97c4;
      }
      .btn-video {
        transition: all 0.3s ease-in-out;
        background-color: #7bbeaa;
      }

      .btn-video:hover {
        background-color: #519c86;
      }
      .img-container {
        overflow: hidden;
      }
      .card {
        transition: all 0.3s ease-in-out;
        position: relative;
        top: 0;
        left: 0;
      }
      .card:hover {
        position: relative;
        top: -5px;
        left: -5px;
        box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.692);
      }
      .card-container:hover .card-img-top {
        transform: scale(1.2);
      }
      .modal-dialog {
        max-width: 590px;
      }
    </style>
    <title>LOL</title>
  </head>
  <body>
    <header></header>
    <div class="container d-flex flex-wrap justify-content-evenly">
      <!-- <template class="card">
        <img src="https://ddragon.leagueoflegends.com/cdn/img/champion/splash/Aatrox_0.jpg" class="card-img-top" />
        <div class="card-body">
          <h5 class="card-title px-2">1. Aatrox - 厄薩斯</h5>
          <p class="card-text px-2">
            尊貴的蘇瑞瑪守護者過去曾為符文大地挺身對抗虛空，只不過厄薩斯和他的同伴們最後卻成為比虛空還要危險的威脅。然而，誰都沒有料想到強大的他居然會被人類的魔法所擊敗。厄薩斯的靈魂寄宿在冥血邪劍之中，經過數個世紀之後，他成為了首位發現如何重獲自由的冥血族。他侵蝕那些嘗試揮舞冥血邪劍的愚蠢人類，將他們的身心據為己有。現在他以近乎原始型態的軀體在符文大地遊蕩，誓言讓世界再次陷入末日來完成他的復仇。
          </p>
          <a href="#" class="btn-information btn">詳細</a>
          <a href="#" class="btn-video btn">影片</a>
        </div>
      </template> -->
    </div>
    <div class="modal fade hero-details" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title detail-title">{{index+1-nameEn-nameZh}}</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <img src="" alt="" class="detail-img" />
            <p class="detail-hp">hp</p>
            <p class="detail-mp">mp</p>
            <p class="detail-atk">atk</p>
            <p class="detail-def">def</p>
            <p class="detail-atkRange">atkRange</p>
            <p class="detail-atkSpeed">atkSpeed</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade hero-video" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title video-title">{{index+1-nameEn-nameZh}}</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body video-body">
            <iframe
              id="modal-iframe"
              width="560"
              height="315"
              src=""
              title="YouTube video player"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen
            ></iframe>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <iframe
      width="560"
      height="315"
      src="https://www.youtube.com/embed/s8p_brCVNOA"
      title="YouTube video player"
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
      allowfullscreen
    ></iframe>
    <script>
      const btnDetail = new bootstrap.Modal(document.querySelector('.hero-details'))
      const btnVideo = new bootstrap.Modal(document.querySelector('.hero-video'))
      const container = document.querySelector('.container')
      let nameArray = []
      let herosObj = {}
      let cardsArr = []
      const url = 'https://ddragon.leagueoflegends.com/cdn/10.22.1/data/zh_TW/champion.json'

      fetch(url)
        .then((res) => res.json())
        .then((res) => {
          herosObj = res.data
          getDataNeeded()
        })
        .then(() => {
          createCard()
        })
        .catch((err) => {
          console.log(err)
        })

      function createCard() {
        cardsArr.forEach(function (hero) {
          let h5 = document.createElement('h5')
          h5.classList.add('card-title', 'px-2')
          h5.innerText = `${hero.rank}.${hero.nameEn} - ${hero.nameZh}`
          let p = document.createElement('p')
          p.classList.add('card-text', 'px-2')
          p.innerText = hero.blurb
          let aInfo = document.createElement('a')
          aInfo.classList.add('btn-information', 'btn', 'mx-1')
          aInfo.innerText = '詳細'

          aInfo.onclick = function () {
            btnDetail.show()
            const img = document.querySelector('.detail-img')
            img.src = hero.imgUrl
            const title = document.querySelector('.detail-title')
            title.innerText = `${hero.rank}.${hero.nameEn} - ${hero.nameZh}`
            const hp = document.querySelector('.detail-hp')
            hp.innerText = `HP:${hero.hp}`
            const mp = document.querySelector('.detail-mp')
            mp.innerText = `MP:${hero.mp}`
            const atk = document.querySelector('.detail-atk')
            atk.innerText = `攻擊力:${hero.atk}`
            const def = document.querySelector('.detail-def')
            def.innerText = `防禦力:${hero.def}`
            const atkRange = document.querySelector('.detail-atkRange')
            atkRange.innerText = `攻擊距離:${hero.atkRange}`
            const atkSpeed = document.querySelector('.detail-atkSpeed')
            atkSpeed.innerText = `攻擊速度:${hero.atkSpeed}`
          }

          //displayInfo()
          let aVideo = document.createElement('a')
          aVideo.classList.add('btn-video', 'btn', 'mx-1')
          aVideo.onclick = function () {
            btnVideo.show()
            const vTitle = document.querySelector('.video-title')
            vTitle.innerText = `${hero.rank}.${hero.nameEn} - ${hero.nameZh}`
            let iFr = document.querySelector('#modal-iframe')
            iFr.src = 'https://www.youtube.com/embed/s8p_brCVNOA'
            const vBody = document.querySelector('.video-body')
            vBody.append(iFr)
          }

          aVideo.innerText = '影片'

          let divBody = document.createElement('div')
          divBody.classList.add('card-body')
          divBody.append(h5, p, aInfo, aVideo)
          let img = document.createElement('img')
          img.classList.add('card-img-top')
          img.src = hero.imgUrl
          let imgContain = document.createElement('div')
          imgContain.classList.add('img-container')
          imgContain.append(img)

          let divCard = document.createElement('div')
          let divCardContain = document.createElement('div')
          divCardContain.classList.add('card')
          divCardContain.append(imgContain, divBody)
          divCard.classList.add('col-lg-3', 'col-md-4', 'col-sm-12', 'p-3', 'card-container')
          divCard.append(divCardContain)
          container.append(divCard)
        })
      }
      //infoModal
      function displayInfo() {
        const title = document.querySelector('detail-title')
        title.innerText = `${hero.rank}.${hero.nameEn} - ${hero.nameZh}`
        const hp = document.querySelector('.detail-hp')
        const mp = document.querySelector('.detail-mp')
        const atk = document.querySelector('.detail-atk')
        const def = document.querySelector('.detail-def')
      }
      function getDataNeeded() {
        nameArray = Object.keys(herosObj)
        nameArray.forEach((name, index) => {
          cardsArr.push({
            rank: index + 1,
            nameEn: herosObj[name].id,
            nameZh: herosObj[name].name,
            blurb: herosObj[name].blurb,
            imgUrl: `https://ddragon.leagueoflegends.com/cdn/img/champion/splash/${name}_0.jpg`,
            atk: herosObj[name].info.attack,
            def: herosObj[name].info.defense,
            hp: herosObj[name].stats.hp,
            mp: herosObj[name].stats.mp,
            atkRange: herosObj[name].stats.attackrange,
            atkSpeed: herosObj[name].stats.attackspeed,
          })
        })
      }
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
      integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
